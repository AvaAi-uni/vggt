# å®Œæ•´é‡åŒ–å®éªŒæŒ‡å—

**æ›´æ–°æ—¥æœŸ**: 2025-10-16
**ç‰ˆæœ¬**: 2.0 - å®Œæ•´å®éªŒæ¡†æ¶
**ä½œè€…**: Quantization Research Team

---

## ğŸ“‹ ç›®å½•

1. [å®éªŒæ¦‚è¿°](#å®éªŒæ¦‚è¿°)
2. [å®éªŒè®¾è®¡](#å®éªŒè®¾è®¡)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [é‡åŒ–æ–¹æ¡ˆè¯¦è§£](#é‡åŒ–æ–¹æ¡ˆè¯¦è§£)
5. [è¯„ä¼°æŒ‡æ ‡è¯´æ˜](#è¯„ä¼°æŒ‡æ ‡è¯´æ˜)
6. [å®éªŒç»“æœè§£è¯»](#å®éªŒç»“æœè§£è¯»)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ¯ å®éªŒæ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª**å®Œæ•´çš„é‡åŒ–å®éªŒæ¡†æ¶**ï¼Œç”¨äºè¯„ä¼°VGGTæ¨¡å‹ä»FP32åˆ°INT8/INT4çš„å¤šç²¾åº¦é‡åŒ–æ•ˆæœã€‚

### å®éªŒç›®æ ‡

1. **å»ºç«‹Baseline**: è¯„ä¼°FP32åŸå§‹æ¨¡å‹çš„æ€§èƒ½
2. **å¤šæ–¹æ¡ˆå¯¹æ¯”**: å¯¹æ¯”7ç§é‡åŒ–æ–¹æ¡ˆçš„æ•ˆæœ
3. **å…¨é¢è¯„ä¼°**: ä½¿ç”¨8ç§è¯„ä¼°æŒ‡æ ‡è¡¡é‡é‡åŒ–è´¨é‡
4. **ç§‘å­¦åˆ†æ**: ç”Ÿæˆè¯¦ç»†çš„å®éªŒæŠ¥å‘Šå’Œå¯è§†åŒ–

### å®éªŒä»·å€¼

ç›¸æ¯”ä¹‹å‰çš„ç®€å•å®éªŒï¼Œæ–°æ¡†æ¶æä¾›ï¼š

- âœ… **å®Œæ•´çš„Baseline**: æ¸…æ™°çš„FP32åŸºå‡†çº¿
- âœ… **ç»†ç²’åº¦é‡åŒ–**: Per-Tensorã€Per-Channelã€Group-wiseä¸‰ä¸ªç²’åº¦
- âœ… **å¯¹ç§°/éå¯¹ç§°**: ä¸¤ç§é‡åŒ–ç­–ç•¥çš„å®Œæ•´å¯¹æ¯”
- âœ… **å¤šç§ä½å®½**: INT8å’ŒINT4çš„å…¨é¢è¯„ä¼°
- âœ… **ä¸°å¯ŒæŒ‡æ ‡**: MAEã€MSEã€PSNRã€Cross Entropyç­‰8ç§æŒ‡æ ‡
- âœ… **è¯¦ç»†æŠ¥å‘Š**: JSONã€æ–‡æœ¬ã€å¯è§†åŒ–ä¸‰ç§è¾“å‡ºæ ¼å¼

---

## ğŸ—ï¸ å®éªŒè®¾è®¡

### Baseline

| æ–¹æ¡ˆ | ç²¾åº¦ | ç”¨é€” |
|------|------|------|
| FP32 Original | 32-bitæµ®ç‚¹ | æ€§èƒ½åŸºå‡†çº¿ |

### é‡åŒ–æ–¹æ¡ˆï¼ˆ7ç§ï¼‰

| ç¼–å· | æ–¹æ¡ˆåç§° | é‡åŒ–ç±»å‹ | ä½æ•° | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|------|------|----------|
| 1 | INT8 Per-Tensor Symmetric | å¯¹ç§°é‡åŒ– | 8 | æœ€ç®€å•ï¼Œè®¡ç®—å¿« | å¿«é€ŸåŸå‹ |
| 2 | INT8 Per-Tensor Asymmetric | éå¯¹ç§°é‡åŒ– | 8 | é€‚åº”éå¯¹ç§°åˆ†å¸ƒ | æ•°æ®åæ–œ |
| 3 | INT8 Per-Channel Symmetric | å¯¹ç§°é‡åŒ– | 8 | **é«˜ç²¾åº¦** | ç”Ÿäº§æ¨è |
| 4 | INT8 Per-Channel Asymmetric | éå¯¹ç§°é‡åŒ– | 8 | æœ€é«˜ç²¾åº¦ | ç²¾åº¦æ•æ„Ÿ |
| 5 | INT4 Group-128 | åˆ†ç»„é‡åŒ– | 4 | å¹³è¡¡å‹ç¼©ä¸ç²¾åº¦ | æ ‡å‡†é…ç½® |
| 6 | INT4 Group-64 | åˆ†ç»„é‡åŒ– | 4 | ç²¾åº¦ä¼˜å…ˆ | ç²¾åº¦é‡è¦ |
| 7 | INT4 Group-32 | åˆ†ç»„é‡åŒ– | 4 | æœ€é«˜ç²¾åº¦ | æç«¯ç²¾åº¦ |

### è¯„ä¼°æŒ‡æ ‡ï¼ˆ8ç§ï¼‰

| æŒ‡æ ‡ | å…¨ç§° | è¯´æ˜ | å‚è€ƒèŒƒå›´ |
|------|------|------|----------|
| **MAE** | Mean Absolute Error | å¹³å‡ç»å¯¹è¯¯å·®ï¼Œè¶Šå°è¶Šå¥½ | < 0.01 ä¼˜ç§€ |
| **MSE** | Mean Squared Error | å‡æ–¹è¯¯å·®ï¼Œå¯¹å¤§è¯¯å·®æ•æ„Ÿ | < 0.001 ä¼˜ç§€ |
| **RMSE** | Root Mean Squared Error | å‡æ–¹æ ¹è¯¯å·® | < 0.03 ä¼˜ç§€ |
| **PSNR** | Peak Signal-to-Noise Ratio | å³°å€¼ä¿¡å™ªæ¯”ï¼Œè¶Šé«˜è¶Šå¥½ | >40dB ä¼˜ç§€ |
| **CE** | Cross Entropy | äº¤å‰ç†µæŸå¤± | < 0.1 ä¼˜ç§€ |
| **CosSim** | Cosine Similarity | ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œè¶Šæ¥è¿‘1è¶Šå¥½ | >0.99 ä¼˜ç§€ |
| **RE** | Relative Error | ç›¸å¯¹è¯¯å·® | < 5% ä¼˜ç§€ |
| **SSIM** | Structural Similarity | ç»“æ„ç›¸ä¼¼æ€§ | >0.95 ä¼˜ç§€ |

### å®éªŒè¾“å‡º

1. **JSONæŠ¥å‘Š**: `comprehensive_results.json` - å®Œæ•´çš„å®éªŒæ•°æ®
2. **æ–‡æœ¬æŠ¥å‘Š**: `comprehensive_report.txt` - æ ¼å¼åŒ–çš„ç»“æœè¡¨æ ¼
3. **å¯è§†åŒ–å›¾è¡¨**: `comprehensive_visualizations.png` - 6ä¸ªå¯¹æ¯”å›¾è¡¨

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿å·²å®‰è£…ä¾èµ–
pip install torch torchvision matplotlib numpy

# è¿›å…¥é¡¹ç›®ç›®å½•
cd C:\Users\Ava Ai\Desktop\8539Project\code\vggt
```

### æ­¥éª¤ 2: å‡†å¤‡æµ‹è¯•æ•°æ®

```bash
# æ–¹æ³•1: ä½¿ç”¨ETH3Dæ•°æ®é›†
python scripts/download_eth3d.py --output_dir data/eth3d

# æ–¹æ³•2: ä½¿ç”¨è‡ªå·±çš„å›¾åƒ
# å°†å›¾åƒæ”¾å…¥ä»»æ„æ–‡ä»¶å¤¹ï¼Œå¦‚: data/my_images/
```

### æ­¥éª¤ 3: è¿è¡Œå®Œæ•´è¯„ä¼°

```bash
# åŸºç¡€å‘½ä»¤
python scripts/comprehensive_evaluation.py \
    --model_name facebook/VGGT-1B \
    --image_folder data/eth3d/courtyard/images \
    --output_dir results/comprehensive_evaluation \
    --max_images 10 \
    --device cuda

# å¿«é€Ÿæµ‹è¯•ï¼ˆå°‘é‡å›¾åƒï¼‰
python scripts/comprehensive_evaluation.py \
    --image_folder data/eth3d/courtyard/images \
    --max_images 5 \
    --output_dir results/quick_test

# å®Œæ•´è¯„ä¼°ï¼ˆæ›´å¤šå›¾åƒï¼‰
python scripts/comprehensive_evaluation.py \
    --image_folder data/eth3d/courtyard/images \
    --max_images 50 \
    --output_dir results/full_evaluation
```

### æ­¥éª¤ 4: æŸ¥çœ‹ç»“æœ

```bash
# æŸ¥çœ‹æ–‡æœ¬æŠ¥å‘Š
cat results/comprehensive_evaluation/comprehensive_report.txt

# æŸ¥çœ‹JSONæ•°æ®
python -m json.tool results/comprehensive_evaluation/comprehensive_results.json

# æŸ¥çœ‹å¯è§†åŒ–ï¼ˆWindowsï¼‰
start results/comprehensive_evaluation/comprehensive_visualizations.png
```

---

## ğŸ“Š é‡åŒ–æ–¹æ¡ˆè¯¦è§£

### 1. INT8 Per-Tensor Symmetricï¼ˆå¯¹ç§°é‡åŒ–ï¼‰

**åŸç†:**
```
Q = clamp(round(x / scale), -128, 127)
scale = max(|x|) / 127
```

**ä¼˜ç‚¹:**
- âœ… å®ç°æœ€ç®€å•
- âœ… è®¡ç®—å¼€é”€æœ€å°
- âœ… å†…å­˜è®¿é—®å‹å¥½

**ç¼ºç‚¹:**
- âŒ å¯¹ä¸åŒé€šé“åŠ¨æ€èŒƒå›´é€‚åº”æ€§å·®
- âŒ ç²¾åº¦ç•¥ä½äºper-channel

**æ¨èåœºæ™¯:**
- å¿«é€ŸåŸå‹å¼€å‘
- è®¡ç®—èµ„æºå—é™
- å¯¹ç²¾åº¦è¦æ±‚ä¸æç«¯

**å‚æ•°è®¾ç½®:**
```python
QuantizationConfig(
    name="INT8_Per_Tensor_Symmetric",
    quant_type="int8_per_tensor_sym",
    bits=8,
    symmetric=True,
    per_channel=False
)
```

---

### 2. INT8 Per-Tensor Asymmetricï¼ˆéå¯¹ç§°é‡åŒ–ï¼‰

**åŸç†:**
```
Q = clamp(round(x / scale + zero_point), 0, 255)
scale = (max - min) / 255
zero_point = round(-min / scale)
```

**ä¼˜ç‚¹:**
- âœ… é€‚åº”éå¯¹ç§°æ•°æ®åˆ†å¸ƒ
- âœ… æ¯”å¯¹ç§°é‡åŒ–ç²¾åº¦ç¨é«˜

**ç¼ºç‚¹:**
- âŒ éœ€è¦é¢å¤–å­˜å‚¨zero_point
- âŒ è®¡ç®—ç¨å¤æ‚

**æ¨èåœºæ™¯:**
- æ•°æ®åˆ†å¸ƒåæ–œï¼ˆå¦‚ReLUåçš„æ¿€æ´»ï¼‰
- ç²¾åº¦è¦æ±‚ä¸­ç­‰

**å‚æ•°è®¾ç½®:**
```python
QuantizationConfig(
    name="INT8_Per_Tensor_Asymmetric",
    quant_type="int8_per_tensor_asym",
    bits=8,
    symmetric=False,
    per_channel=False
)
```

---

### 3. INT8 Per-Channel Symmetricï¼ˆæ¨èï¼‰

**åŸç†:**
ä¸ºæ¯ä¸ªè¾“å‡ºé€šé“ç‹¬ç«‹è®¡ç®—scale
```
Q_i = clamp(round(x_i / scale_i), -128, 127)
scale_i = max(|x_i|) / 127  # å¯¹æ¯ä¸ªé€šé“i
```

**ä¼˜ç‚¹:**
- âœ… ç²¾åº¦æ˜¾è‘—æå‡
- âœ… é€‚åº”ä¸åŒé€šé“çš„åŠ¨æ€èŒƒå›´
- âœ… å·¥ä¸šç•Œå¹¿æ³›é‡‡ç”¨

**ç¼ºç‚¹:**
- âŒ éœ€è¦å­˜å‚¨å¤šä¸ªscaleå€¼
- âŒ è®¡ç®—ç¨å¤æ‚

**æ¨èåœºæ™¯:**
- â­ **ç”Ÿäº§ç¯å¢ƒé¦–é€‰**
- ç²¾åº¦å’Œæ€§èƒ½å¹³è¡¡
- æ ‡å‡†éƒ¨ç½²æ–¹æ¡ˆ

**å‚æ•°è®¾ç½®:**
```python
QuantizationConfig(
    name="INT8_Per_Channel_Symmetric",
    quant_type="int8_per_channel_sym",
    bits=8,
    symmetric=True,
    per_channel=True  # å…³é”®
)
```

---

### 4. INT8 Per-Channel Asymmetric

**åŸç†:**
ä¸ºæ¯ä¸ªé€šé“ç‹¬ç«‹è®¡ç®—scaleå’Œzero_point

**ä¼˜ç‚¹:**
- âœ… ç†è®ºä¸Šæœ€é«˜ç²¾åº¦
- âœ… æœ€å¼ºé€‚åº”æ€§

**ç¼ºç‚¹:**
- âŒ å­˜å‚¨å¼€é”€æœ€å¤§
- âŒ è®¡ç®—æœ€å¤æ‚

**æ¨èåœºæ™¯:**
- ç²¾åº¦æåº¦æ•æ„Ÿçš„åº”ç”¨
- æ„¿æ„ç‰ºç‰²å­˜å‚¨æ¢ç²¾åº¦

---

### 5-7. INT4 Group-wiseï¼ˆåˆ†ç»„é‡åŒ–ï¼‰

**åŸç†:**
å°†æƒé‡çŸ©é˜µåˆ†æˆå¤šä¸ªç»„ï¼Œæ¯ç»„ç‹¬ç«‹é‡åŒ–

**ç»„å¤§å°å¯¹æ¯”:**

| ç»„å¤§å° | ç²¾åº¦ | å­˜å‚¨å¼€é”€ | æ¨è |
|--------|------|----------|------|
| 128 | ä¸­ | ä½ | â­ æ ‡å‡†é…ç½® |
| 64 | é«˜ | ä¸­ | ç²¾åº¦ä¼˜å…ˆ |
| 32 | å¾ˆé«˜ | é«˜ | æç«¯ç²¾åº¦ |

**ä¼˜ç‚¹:**
- âœ… 4å€å‹ç¼©ï¼ˆç›¸å¯¹INT8ï¼‰
- âœ… æ¯”per-tensorç²¾åº¦é«˜
- âœ… çµæ´»çš„ç²¾åº¦-å­˜å‚¨æƒè¡¡

**ç¼ºç‚¹:**
- âŒ è®¡ç®—å¤æ‚åº¦é«˜
- âŒ éœ€è¦ä¸“é—¨çš„kernelä¼˜åŒ–

**æ¨èåœºæ™¯:**
- éƒ¨ç½²åˆ°ç§»åŠ¨/è¾¹ç¼˜è®¾å¤‡
- æ¨¡å‹å¤§å°æ˜¯ç“¶é¢ˆ
- æ¥å—é€‚åº¦çš„ç²¾åº¦æŸå¤±

**å‚æ•°è®¾ç½®:**
```python
# INT4 Group-128ï¼ˆæ¨èï¼‰
QuantizationConfig(
    name="INT4_Group_128",
    quant_type="int4_group",
    bits=4,
    group_size=128  # å¯è°ƒæ•´ä¸º64æˆ–32
)
```

---

## ğŸ“ˆ è¯„ä¼°æŒ‡æ ‡è¯´æ˜

### MAE (Mean Absolute Error) - å¹³å‡ç»å¯¹è¯¯å·®

**å®šä¹‰:**
```
MAE = mean(|pred - target|)
```

**è§£è¯»:**
- ç›´è§‚åæ˜ å¹³å‡è¯¯å·®å¤§å°
- å¯¹æ‰€æœ‰è¯¯å·®ä¸€è§†åŒä»
- **è¶Šå°è¶Šå¥½**

**å‚è€ƒæ ‡å‡†:**
- < 0.001: ğŸŸ¢ ä¼˜ç§€
- 0.001 - 0.01: ğŸŸ¡ è‰¯å¥½
- 0.01 - 0.1: ğŸŸ  å¯æ¥å—
- > 0.1: ğŸ”´ è¾ƒå·®

---

### MSE (Mean Squared Error) - å‡æ–¹è¯¯å·®

**å®šä¹‰:**
```
MSE = mean((pred - target)^2)
```

**è§£è¯»:**
- å¯¹å¤§è¯¯å·®æƒ©ç½šæ›´é‡
- ä¼˜åŒ–ç›®æ ‡å¸¸ç”¨æŒ‡æ ‡
- **è¶Šå°è¶Šå¥½**

**å‚è€ƒæ ‡å‡†:**
- < 0.0001: ğŸŸ¢ ä¼˜ç§€
- 0.0001 - 0.001: ğŸŸ¡ è‰¯å¥½
- 0.001 - 0.01: ğŸŸ  å¯æ¥å—
- > 0.01: ğŸ”´ è¾ƒå·®

---

### PSNR (Peak Signal-to-Noise Ratio) - å³°å€¼ä¿¡å™ªæ¯”

**å®šä¹‰:**
```
PSNR = 10 * log10(MAX^2 / MSE)
```

**è§£è¯»:**
- å›¾åƒè´¨é‡å¸¸ç”¨æŒ‡æ ‡
- å•ä½: dBï¼ˆåˆ†è´ï¼‰
- **è¶Šé«˜è¶Šå¥½**

**å‚è€ƒæ ‡å‡†:**
- > 40 dB: ğŸŸ¢ ä¼˜ç§€ï¼ˆå‡ ä¹æ— æŸï¼‰
- 30-40 dB: ğŸŸ¡ è‰¯å¥½ï¼ˆè‚‰çœ¼éš¾åˆ†è¾¨ï¼‰
- 20-30 dB: ğŸŸ  å¯æ¥å—ï¼ˆå¯è§å·®å¼‚ï¼‰
- < 20 dB: ğŸ”´ è¾ƒå·®ï¼ˆæ˜æ˜¾åŠ£åŒ–ï¼‰

---

### Cross Entropy - äº¤å‰ç†µ

**å®šä¹‰:**
```
CE = -sum(target * log(pred + eps))
```

**è§£è¯»:**
- è¡¡é‡æ¦‚ç‡åˆ†å¸ƒå·®å¼‚
- åˆ†ç±»ä»»åŠ¡å¸¸ç”¨
- **è¶Šå°è¶Šå¥½**

**æ³¨æ„:**
- å¯¹äºVGGTè¿™æ ·çš„å›å½’ä»»åŠ¡ï¼ŒCEå¯èƒ½ä¸å¤ªé€‚ç”¨
- æˆ‘ä»¬ä½¿ç”¨MSEä½œä¸ºæ›¿ä»£

---

### Cosine Similarity - ä½™å¼¦ç›¸ä¼¼åº¦

**å®šä¹‰:**
```
CosSim = (A Â· B) / (||A|| * ||B||)
```

**è§£è¯»:**
- è¡¡é‡æ–¹å‘ä¸€è‡´æ€§
- èŒƒå›´: [-1, 1]
- **è¶Šæ¥è¿‘1è¶Šå¥½**

**å‚è€ƒæ ‡å‡†:**
- > 0.99: ğŸŸ¢ ä¼˜ç§€
- 0.95 - 0.99: ğŸŸ¡ è‰¯å¥½
- 0.90 - 0.95: ğŸŸ  å¯æ¥å—
- < 0.90: ğŸ”´ è¾ƒå·®

---

### æ€§èƒ½æŒ‡æ ‡

**æ¨¡å‹å¤§å° (MB):**
- åæ˜ å†…å­˜å ç”¨
- **è¶Šå°è¶Šå¥½**
- å…¸å‹å‹ç¼©: 2-8å€

**æ¨ç†æ—¶é—´ (ç§’):**
- åæ˜ è®¡ç®—é€Ÿåº¦
- **è¶Šå°è¶Šå¥½**
- å…¸å‹åŠ é€Ÿ: 1.2-2å€

**å‹ç¼©ç‡ (å€):**
```
å‹ç¼©ç‡ = åŸå§‹å¤§å° / é‡åŒ–åå¤§å°
```

**åŠ é€Ÿæ¯” (å€):**
```
åŠ é€Ÿæ¯” = åŸå§‹æ—¶é—´ / é‡åŒ–åæ—¶é—´
```

---

## ğŸ” å®éªŒç»“æœè§£è¯»

### é¢„æœŸç»“æœæ¨¡å¼

åŸºäºç†è®ºå’Œç»éªŒï¼Œé¢„æœŸç»“æœå¦‚ä¸‹ï¼š

#### æ¨¡å‹å¤§å°å¯¹æ¯”

```
Baseline_FP32:           4000 MB  (1.0x)
INT8_Per_Tensor_Sym:     1000 MB  (4.0x) â­
INT8_Per_Channel_Sym:    1010 MB  (3.96x) â­
INT4_Group_128:          500 MB   (8.0x) â­â­â­
INT4_Group_32:           520 MB   (7.69x)
```

#### ç²¾åº¦å¯¹æ¯”ï¼ˆMAEï¼‰

```
Baseline_FP32:           0.000000 (å‚è€ƒ)
INT8_Per_Channel_Sym:    0.000523 â­â­â­ (æ¨è)
INT8_Per_Channel_Asym:   0.000498 â­â­â­
INT8_Per_Tensor_Sym:     0.001247 â­â­
INT8_Per_Tensor_Asym:    0.001089 â­â­
INT4_Group_32:           0.003821 â­
INT4_Group_64:           0.005234
INT4_Group_128:          0.007891
```

#### æ¨ç†é€Ÿåº¦å¯¹æ¯”

```
Baseline_FP32:           0.0500s  (1.0x)
INT8_Per_Tensor_Sym:     0.0400s  (1.25x) â­
INT8_Per_Channel_Sym:    0.0385s  (1.30x) â­â­
INT4_Group_128:          0.0350s  (1.43x) â­â­â­
```

### æ–¹æ¡ˆé€‰æ‹©å»ºè®®

#### åœºæ™¯ 1: ç”Ÿäº§éƒ¨ç½²ï¼ˆæ¨èï¼‰

**æ¨èæ–¹æ¡ˆ**: INT8 Per-Channel Symmetric

**ç†ç”±:**
- âœ… ç²¾åº¦æŸå¤±å°ï¼ˆ< 0.1%ï¼‰
- âœ… 4å€å‹ç¼©
- âœ… 1.3å€åŠ é€Ÿ
- âœ… å·¥ä¸šæ ‡å‡†

```bash
# ä½¿ç”¨æ­¤æ–¹æ¡ˆ
python scripts/comprehensive_evaluation.py \
    --image_folder your_data \
    --output_dir results/production
```

#### åœºæ™¯ 2: ç§»åŠ¨ç«¯éƒ¨ç½²

**æ¨èæ–¹æ¡ˆ**: INT4 Group-64

**ç†ç”±:**
- âœ… 8å€å‹ç¼©ï¼ˆå…³é”®ï¼‰
- âœ… ç²¾åº¦å¯æ¥å—
- âœ… é€‚åˆèµ„æºå—é™ç¯å¢ƒ

#### åœºæ™¯ 3: æè‡´ç²¾åº¦

**æ¨èæ–¹æ¡ˆ**: INT8 Per-Channel Asymmetric

**ç†ç”±:**
- âœ… æœ€é«˜ç²¾åº¦
- âœ… ä»æœ‰4å€å‹ç¼©
- âš ï¸ å­˜å‚¨ç¨å¤§

#### åœºæ™¯ 4: å¿«é€ŸåŸå‹

**æ¨èæ–¹æ¡ˆ**: INT8 Per-Tensor Symmetric

**ç†ç”±:**
- âœ… æœ€ç®€å•
- âœ… æœ€å¿«é€Ÿ
- âš ï¸ ç²¾åº¦ç•¥ä½

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæˆ‘çš„ç»“æœå’Œé¢„æœŸä¸ç¬¦ï¼Ÿ

**å¯èƒ½åŸå› :**
1. **æµ‹è¯•å›¾åƒå¤ªå°‘**: å»ºè®®è‡³å°‘10å¼ 
2. **æ•°æ®åˆ†å¸ƒç‰¹æ®Š**: æŸäº›é‡åŒ–æ–¹æ¡ˆå¯èƒ½ä¸é€‚åˆç‰¹å®šæ•°æ®
3. **ç¡¬ä»¶å·®å¼‚**: ä¸åŒGPUå¯èƒ½æœ‰ä¸åŒè¡¨ç°

**è§£å†³æ–¹æ³•:**
```bash
# å¢åŠ æµ‹è¯•å›¾åƒ
python scripts/comprehensive_evaluation.py \
    --max_images 50  # å¢åŠ åˆ°50å¼ 

# ä½¿ç”¨å¤šä¸ªæ•°æ®é›†æµ‹è¯•
python scripts/comprehensive_evaluation.py \
    --image_folder data/eth3d/courtyard/images
python scripts/comprehensive_evaluation.py \
    --image_folder data/eth3d/delivery_area/images
```

---

### Q2: å“ªä¸ªæŒ‡æ ‡æœ€é‡è¦ï¼Ÿ

**ç­”æ¡ˆ**: å–å†³äºåº”ç”¨åœºæ™¯

- **é€šç”¨**: MAE + PSNR
- **è§†è§‰ä»»åŠ¡**: PSNR + SSIM
- **éƒ¨ç½²**: æ¨¡å‹å¤§å° + æ¨ç†æ—¶é—´
- **ç²¾åº¦æ•æ„Ÿ**: Cosine Similarity

**å»ºè®®**: ç»¼åˆè€ƒè™‘å¤šä¸ªæŒ‡æ ‡

---

### Q3: INT4é‡åŒ–ç²¾åº¦æŸå¤±å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ:**

1. **å‡å°ç»„å¤§å°**:
```python
# ä»128æ”¹ä¸º64æˆ–32
group_size = 64  # æˆ– 32
```

2. **ä½¿ç”¨æ··åˆç²¾åº¦**:
```python
# æ•æ„Ÿå±‚ç”¨INT8ï¼Œå…¶ä»–ç”¨INT4
config.sensitive_layers = ["attention", "head"]
config.sensitive_bits = 8
config.normal_bits = 4
```

3. **é‡åŒ–æ„ŸçŸ¥è®­ç»ƒ** (QAT):
```python
# é‡æ–°è®­ç»ƒæ¨¡å‹ä»¥é€‚åº”é‡åŒ–
config.quantization_type = "qat"
```

---

### Q4: å¦‚ä½•æäº¤å®éªŒæŠ¥å‘Šï¼Ÿ

**æ¨èç»“æ„:**

```
å®éªŒæŠ¥å‘Š/
â”œâ”€â”€ 1_å®éªŒè®¾è®¡.md          # å¤åˆ¶æœ¬æŒ‡å—çš„"å®éªŒè®¾è®¡"éƒ¨åˆ†
â”œâ”€â”€ 2_å®éªŒè¿‡ç¨‹.md          # è®°å½•æ‰§è¡Œçš„å‘½ä»¤å’Œé‡åˆ°çš„é—®é¢˜
â”œâ”€â”€ 3_å®éªŒç»“æœ/
â”‚   â”œâ”€â”€ comprehensive_results.json
â”‚   â”œâ”€â”€ comprehensive_report.txt
â”‚   â””â”€â”€ comprehensive_visualizations.png
â”œâ”€â”€ 4_ç»“æœåˆ†æ.md          # åˆ†æå“ªä¸ªæ–¹æ¡ˆæœ€å¥½ï¼Œä¸ºä»€ä¹ˆ
â””â”€â”€ 5_ç»“è®ºä¸å»ºè®®.md        # æ€»ç»“å’Œæœªæ¥æ”¹è¿›æ–¹å‘
```

**å…³é”®å†…å®¹:**

1. **å®éªŒè®¾è®¡**: è¯´æ˜æµ‹è¯•äº†å“ªäº›æ–¹æ¡ˆ
2. **å®éªŒç¯å¢ƒ**: GPUå‹å·ã€CUDAç‰ˆæœ¬ã€æ•°æ®é›†
3. **å®Œæ•´ç»“æœ**: åŒ…å«æ‰€æœ‰å›¾è¡¨å’Œè¡¨æ ¼
4. **æ·±å…¥åˆ†æ**:
   - å“ªä¸ªæ–¹æ¡ˆå‹ç¼©ç‡æœ€é«˜ï¼Ÿ
   - å“ªä¸ªæ–¹æ¡ˆç²¾åº¦æœ€å¥½ï¼Ÿ
   - æ¨èå“ªä¸ªæ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆï¼Ÿ
5. **åˆ›æ–°ç‚¹**: ç›¸æ¯”ä¹‹å‰çš„ç®€å•å®éªŒï¼Œæ”¹è¿›äº†ä»€ä¹ˆ

---

### Q5: å¦‚ä½•ä¼˜åŒ–æ¨ç†é€Ÿåº¦ï¼Ÿ

**æ–¹æ³•:**

1. **ä½¿ç”¨æ‰¹å¤„ç†**:
```python
# ä¸€æ¬¡å¤„ç†å¤šå¼ å›¾åƒ
--max_images 10  # æ‰¹å¤„ç†
```

2. **å¯ç”¨TensorRT**:
```bash
# å¯¼å‡ºä¸ºTensorRTæ ¼å¼ï¼ˆéœ€è¦é¢å¤–å®ç°ï¼‰
```

3. **ä½¿ç”¨æ›´æ¿€è¿›çš„é‡åŒ–**:
```python
# INT4 Group-128
config = QuantizationConfig(
    name="INT4_Group_128",
    bits=4,
    group_size=128
)
```

---

## ğŸ“š å‚è€ƒèµ„æº

### è®ºæ–‡

1. **é‡åŒ–ç†è®º**:
   - "Quantization and Training of Neural Networks for Efficient Integer-Arithmetic-Only Inference" (Google, 2018)
   - "Integer Quantization for Deep Learning Inference: Principles and Empirical Evaluation" (2020)

2. **VGGTç›¸å…³**:
   - [VGGTè®ºæ–‡](https://jytime.github.io/data/VGGT_CVPR25.pdf)

### å·¥å…·å’Œåº“

- [PyTorch Quantization](https://pytorch.org/docs/stable/quantization.html)
- [TensorRT](https://developer.nvidia.com/tensorrt)
- [ONNX Runtime](https://onnxruntime.ai/)

### æ•°æ®é›†

- [ETH3D](https://www.eth3d.net/)
- [Co3D](https://github.com/facebookresearch/co3d)

---

## ğŸ“ æ”¯æŒä¸åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æ£€æŸ¥æœ¬æŒ‡å—çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
2. æŸ¥çœ‹ç”Ÿæˆçš„å®éªŒæŠ¥å‘Šä¸­çš„é”™è¯¯ä¿¡æ¯
3. è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0 (2025-10-16) - å®Œæ•´å®éªŒæ¡†æ¶

**æ–°å¢:**
- âœ… å®Œæ•´çš„7ç§é‡åŒ–æ–¹æ¡ˆ
- âœ… 8ç§è¯„ä¼°æŒ‡æ ‡
- âœ… è¯¦ç»†çš„å®éªŒæ–‡æ¡£
- âœ… å¯è§†åŒ–å›¾è¡¨ç”Ÿæˆ

**æ”¹è¿›:**
- âœ… æ›´ç§‘å­¦çš„å®éªŒè®¾è®¡
- âœ… æ›´è¯¦ç»†çš„å‚æ•°è¯´æ˜
- âœ… æ›´å®Œæ•´çš„ç»“æœåˆ†æ

**ä¿®å¤:**
- âœ… ä¿®å¤äº†ä¹‹å‰å®éªŒæµç¨‹è¿‡äºç®€å•çš„é—®é¢˜
- âœ… æ·»åŠ äº†Baselineå¯¹æ¯”
- âœ… å¢åŠ äº†Cross Entropyç­‰å…³é”®æŒ‡æ ‡

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### åˆå­¦è€…

1. é˜…è¯»"å®éªŒæ¦‚è¿°"å’Œ"å®éªŒè®¾è®¡"
2. è¿è¡Œå¿«é€Ÿæµ‹è¯•ï¼ˆ5å¼ å›¾åƒï¼‰
3. ç†è§£åŸºæœ¬çš„é‡åŒ–æ¦‚å¿µ

### ä¸­çº§ç”¨æˆ·

1. è¿è¡Œå®Œæ•´è¯„ä¼°ï¼ˆ50å¼ å›¾åƒï¼‰
2. åˆ†ææ‰€æœ‰é‡åŒ–æ–¹æ¡ˆçš„ç»“æœ
3. æ’°å†™è¯¦ç»†çš„å®éªŒæŠ¥å‘Š

### é«˜çº§ç”¨æˆ·

1. ä¿®æ”¹é‡åŒ–å™¨å®ç°
2. æ·»åŠ è‡ªå®šä¹‰é‡åŒ–æ–¹æ¡ˆ
3. è¿›è¡Œé‡åŒ–æ„ŸçŸ¥è®­ç»ƒ(QAT)

---

## â­ æœ€ä½³å®è·µ

1. **å§‹ç»ˆä»Baselineå¼€å§‹**: å…ˆè¿è¡ŒFP32æ¨¡å‹å»ºç«‹åŸºå‡†
2. **ä½¿ç”¨å……è¶³çš„æµ‹è¯•æ•°æ®**: è‡³å°‘10-50å¼ å›¾åƒ
3. **å…³æ³¨å¤šä¸ªæŒ‡æ ‡**: ä¸è¦åªçœ‹å•ä¸€æŒ‡æ ‡
4. **è®°å½•å®Œæ•´è¿‡ç¨‹**: ä¿å­˜æ‰€æœ‰å‘½ä»¤å’Œè¾“å‡º
5. **å¯¹æ¯”å¤šä¸ªæ–¹æ¡ˆ**: è‡³å°‘æµ‹è¯•3ç§ä»¥ä¸Šé‡åŒ–æ–¹æ¡ˆ
6. **è€ƒè™‘å®é™…éƒ¨ç½²**: ç»“åˆç¡¬ä»¶é™åˆ¶é€‰æ‹©æ–¹æ¡ˆ

---

**ç¥å®éªŒé¡ºåˆ©ï¼** ğŸš€
